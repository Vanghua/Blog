#### CSS视觉格式化模型

#### CSS属性计算过程

> **含义：** 
>
> > 一个元素的所有CSS属性从没有值到有值的过程
>
> **样式表类型：**
>
> > 内部样式表（style标签）
> >
> > 外部样式表（link标签）
> >
> > 浏览器默认样式表
> >
> > 内联样式表
>
> **样式表来源：**
>
> > 用户代理样式
> >
> > 页面作者样式
> >
> > 用户自定义样式
>
> **选择器权重：**
>
> > 
>
> **计算过程**
>
> > **确定声明值：** 
> >
> > * 没有冲突的属性直接使用。
> > * 相对值转为绝对值。例如：字体颜色，字体粗细。
> >
> > **确定层叠值：** 
> >
> > * 比较样式表来源权重
> > * 比较选择器权重
> > * 比较声明顺序
> >
> > **确定继承值**
> >
> > **确定默认值**



#### 事件循环模型

#### 浏览器进程模型



#### 浏览器渲染过程

> #### 主线程
>
> **解析文档Parse**
>
> > 得到DOM树和CSSOM树。
> >
> > * 解析时启动预解析线程下载外部JS和CSS资源。
> >
> > * 解析到script标签时根据标签属性决定是否阻塞HTML解析。
> >
> > * 解析到link标签时不会阻塞HTML解析在预解析线程预解析。
>
> **计算样式Compute**
>
> > 得到带有最终样式的DOM树。
> >
> > * 计算时相对值变为绝对值em到px，预设值变为具体值black到rgba(0,0,0,1)。
>
> **布局Layout**
>
> > 得到带有布局信息的Layout树。
> >
> > * 计算几何信息。比如宽高，相对包含块的位置。
> >
> > * 大部分场景Layout树和DOM树不一一对应。在Layout树中比如display: none没有几何信息不生成节点；匿名行盒包裹文本节点生成额外节点；伪元素选择器生成额外节点。
>
> **分层Layer**
>
> > 得到带有分层信息的Layout树。
> >
> > * 分层的好处是，每个分层可以独立绘制，发生变动时不影响其它分层。
> >
> > * 与堆叠上下文有关的css属性会影响分层结果，比如zIndex，opacity等等。
>
> **绘制Paint**
>
> > 得到绘制指令。
> >
> > * 绘制指令说明如何绘制，比如画笔移动到某个像素画某个内容。
>
> 
>
> #### 合成线程
>
> **分块Tiling**
>
> > 得到每个分层中更小的块。
> >
> > * 分块时从线程池取多个线程对分层进行划分。
>
> **光栅化Raster**
>
> > 得到位图（位图是像素图，记录了像素颜色）。
> >
> > * 光栅化时在GPU进程中启动多个线程处理。
> > * 光栅化优先处理靠近视口的块。
>
> **画Draw**
>
> > 完成屏幕成像
> >
> > * 标识每个分层每个位图的渲染指引信息，交付给GPU进程进行系统调用完成屏幕成像。
> > * 指引信息会考虑transform的旋转缩放等信息，因此如果通过animation而不是js修改transform，计算只会发生在合成线程与主线程无关，比较高效。
>



#### 浏览器渲染Reflow

> **含义**
>
> > Reflow（重新排版）布局发生变化，重新计算Layout树。
>
> **常见操作**
>
> > **Layout前阶段：** 元素颜色，字体大小，圆角变化。
> >
> > **Layout阶段：** 元素宽高，偏移量变化，访问计算属性。



#### 浏览器渲染Repaint

> **含义**
>
> > Repaint（重新绘制）分层发生变化，重新计算Layer树。
>
> **常见操作**
>
> > **Layer阶段：** opacity，z-index变化。
>
> **非回答内容**
>
> > **回流重绘关系：** 回流一定引起重绘，因为Layout树计算在Layer树之前。
> >
> > **优化思路：** （1）批处理，多次操作合并到一次。（2）缩小影响范围，回流不影响使用固定或绝对定位。



#### 浏览器地址栏输入URL后行为



#### 闭包

#### 垃圾回收

#### 作用域链

#### 原型与原型链

#### 同源与跨域

#### Cookie